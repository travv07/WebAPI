
<div class="header-admin">
    <div class="header-admin-1">
        <div class="title-admin">
            <h3>Admin Page Shop Clothes</h3>
        </div>
        <div class="account">
            <img src="iconshop.png" alt="" width="50px" height="50px">
        </div>  
    </div>
</div>
<div class="content-admin">
    <div class="content-admin-1">
        <div class="content-admin-left">
            <ul class="menu-admin">
                <li><%= link_to "Home",admins_path  %></li>
                <li><%= link_to "User", users_admin_path  %></li>
                <li><%= link_to "Product", products_admin_path  %></li>
                <li><a href="#">Link</a></li>
                <li><a href="#">Link</a></li>
            </ul>
        </div>
        <div class="content-admin-right">
             <div class="crumb">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><%= link_to "Dashboard", admins_path %></li>
                        <li class="breadcrumb-item active valuename" aria-current="page" >List Products</li>
                    </ol>
                </nav>
             </div>
            <table class="table">
                <thead>
                    <tr>
                            <th scope="col"></th>
                            <th scope="col">name</th>
                            <th scope="col">description</th>
                            <th scope="col">category</th>
                            <th scope="col">price</th>
                            <th scope="col">quality</th>
                            <th scope="col">image</th>
                            <th colspan="2"></th>
                    </tr>
                </thead>
                <tbody class="trElment">

                </tbody>
            </table>
            <button class="btn insert-product"> Insert Product </button>
        </div>
    </div>
</div>
<script type="text/javascript">
    $.ajax({
        url: Routes.v1_products_path(),
        type: 'GET',
        dataType: 'json',
        success: function(data){
            var x=0,name,description,category,price,quality,image;
            $(data).each(function(index,el){
                for (var i in el['data']){
                x++;
                id = el['data'][i].id;
                name = el['data'][i].name;
                description = el['data'][i].description;
                category = el['data'][i].category;
                price = el['data'][i].price;
                quality = el['data'][i].quality;
                image = el['data'][i].image;

                var tdNameElement = $('<td></td>');
                tdNameElement.html(name);

                var tdDesElement = $('<td></td>');
                tdDesElement.html(description);

                var tdCateElement = $('<td></td>');
                tdCateElement.html(category);

                var tdPriceElement = $('<td></td>');
                tdPriceElement.html(price);

                var tdQuaElement = $('<td></td>');
                tdQuaElement.html(quality);

                var tdImageElement = $('<td></td>');
                var imagex = $('<img style="width:50px;">')
                imagex.attr({
                    'src': image,
                    'class': 'imageproduct'
                })
                tdImageElement.append(imagex);

                var tdxElement = $('<td></td>');
                tdxElement.html(x);

                var tdUpdateElement = $('<td></td>');
                var iconUpdate = $('<i class="fa fa-pencil-square-o update-product" aria-hidden="true"></i>');
                iconUpdate.attr({
                  'ten': id
                });
                tdUpdateElement.append(iconUpdate);

                var tdDeleteElement = $('<td></td>');

                var iconDelete = $('<i class="fa fa-trash-o delete-product" aria-hidden="true"></i>');
                iconDelete.attr({
                  'ten': id
                })
                tdDeleteElement.append(iconDelete);

                var trElment = $('<tr></tr>');
                trElment.append(tdxElement);
                trElment.append(tdNameElement);
                trElment.append(tdDesElement);
                trElment.append(tdCateElement);
                trElment.append(tdPriceElement);
                trElment.append(tdQuaElement);
                trElment.append(tdImageElement);
                trElment.append(tdUpdateElement);
                trElment.append(tdDeleteElement);

                var tx = $('.trElment');
                tx.append(trElment);
                console.log(el)
              }            
          });
        }
    });
</script>
<script type="text/javascript">
    $(document).ready(function(){
        $('.update-product').click(function(){
            var id = $(this).attr('ten');
            window.location.href = Routes.edit_product_path(id);
        });
        $('.insert-product').click(function(){
            window.location.href = Routes.new_product_path(id);
        });
        $('.delete-product').click(function(){
            window.location.href =Routes.product_path();
        })
    })
</script>
